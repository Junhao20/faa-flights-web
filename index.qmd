---
title: "Why Your Flight Was Late: A Deep Dive Into U.S. Airline Delays"
jupyter: sql_final_web
format:
  html:
    code-fold: true
---

```{python}
import sys, packaging, pandas as pd
print("python exe:", sys.executable)
print("packaging:", packaging.__version__)
print("pandas:", pd.__version__)
```

Since we are trying to build a publication-level visualization, we are going to use this code as our plotting style
```{python}
import pandas as pd
import matplotlib.pyplot as plt
plt.rcParams.update({
    "figure.figsize": (7, 4),
    "font.size": 11,
    "axes.labelsize": 12,
    "axes.titlesize": 13,
    "xtick.labelsize": 10,
    "ytick.labelsize": 10,
    "legend.fontsize": 10,
    "axes.grid": True,
    "grid.linestyle": "--",
    "grid.alpha": 0.4,
    "figure.dpi": 120, # download friendly
})
```

```{python}
import pandas as pd
import matplotlib.pyplot as plt
q1 = pd.read_csv("data/q1_maxdelay_air.csv")
q1 = q1[q1["Reporting_Airline"] != "Reporting_Airline"].copy()
q1["max_delay"] = q1["max_delay"].astype(int)

q1 = q1.sort_values("max_delay", ascending=True)

fig, ax = plt.subplots()
ax.barh(q1["Reporting_Airline"], q1["max_delay"])
ax.set_xlabel("Maximum departure delay (minutes)")
ax.set_ylabel("Airline")
ax.set_title("Maximum observed departure delay by airline")

for i, (delay) in enumerate(q1["max_delay"]):
    ax.text(delay + 15, i, f"{delay}", va="center", fontsize=9)

plt.tight_layout()
plt.show()
```








